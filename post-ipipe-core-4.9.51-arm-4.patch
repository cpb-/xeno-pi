diff --git a/drivers/irqchip/irq-bcm2835.c b/drivers/irqchip/irq-bcm2835.c
index 9ac27047aebd..498c6e1adbc7 100644
--- a/drivers/irqchip/irq-bcm2835.c
+++ b/drivers/irqchip/irq-bcm2835.c
@@ -186,6 +186,10 @@ static struct irq_chip armctrl_chip = {
 	.irq_hold = armctrl_mask_irq,
 	.irq_release = armctrl_unmask_irq,
 #endif
+#ifdef CONFIG_ARM64
+        .irq_ack    = armctrl_ack_irq
+#endif
+
 };
 
 static int armctrl_xlate(struct irq_domain *d, struct device_node *ctrlr,
diff --git a/drivers/irqchip/irq-bcm2836.c b/drivers/irqchip/irq-bcm2836.c
index 022bdabe461e..979b27612793 100644
--- a/drivers/irqchip/irq-bcm2836.c
+++ b/drivers/irqchip/irq-bcm2836.c
@@ -226,6 +226,7 @@ __exception_irq_entry bcm2836_arm_irqchip_handle_irq(struct pt_regs *regs)
 		u32 ipi = ffs(mbox_val) - 1;
 
 		writel(1 << ipi, mailbox0);
+		dsb(sy);
 		ipipe_handle_multi_ipi(ipi, regs);
 #endif
 	} else if (stat) {
diff --git a/drivers/pinctrl/bcm/pinctrl-bcm2835.c b/drivers/pinctrl/bcm/pinctrl-bcm2835.c
index b99f9bc10add..3fe50163bdc5 100644
--- a/drivers/pinctrl/bcm/pinctrl-bcm2835.c
+++ b/drivers/pinctrl/bcm/pinctrl-bcm2835.c
@@ -107,7 +107,7 @@ struct bcm2835_pinctrl {
 	struct gpio_chip gpio_chip;
 	struct pinctrl_gpio_range gpio_range;
 
-	struct bcm2835_gpio_irqdata irq_data[BCM2835_NUM_BANKS];
+	struct bcm2835_gpio_irqdata irq_data[BCM2835_NUM_IRQS];
 #ifdef CONFIG_IPIPE
 	ipipe_spinlock_t irq_lock[BCM2835_NUM_BANKS];
 #else
@@ -399,8 +399,6 @@ static struct gpio_chip bcm2835_gpio_chip = {
 
 static int bcm2835_gpio_irq_handle_bank(struct bcm2835_pinctrl *pc,
 					unsigned int bank, u32 mask)
-// 1 line added below to apply patch
-static irqreturn_t bcm2835_gpio_irq_handler(int irq, void *dev_id)
 {
 	unsigned long events;
 	unsigned offset;
@@ -416,7 +414,9 @@ static irqreturn_t bcm2835_gpio_irq_handler(int irq, void *dev_id)
 
 		ipipe_handle_demuxed_irq(irq_linear_revmap(pc->irq_domain, gpio));
 	}
-	return events ? IRQ_HANDLED : IRQ_NONE;
+	return (events != 0);
 }
 
+ static irqreturn_t bcm2835_gpio_irq_handler(int irq, void *dev_id);
+
 static void gpio_irq_cascade(struct irq_desc *desc)
@@ -427,13 +425,6 @@ static void gpio_irq_cascade(struct irq_desc *desc)
 #endif
 }
 
-static inline void __bcm2835_gpio_irq_config(struct bcm2835_pinctrl *pc,
-        unsigned reg, unsigned offset, bool enable)
-// 5 lines added above to apply patch
-
-	return (events != 0);
-}
-
 static irqreturn_t bcm2835_gpio_irq_handler(int irq, void *dev_id)
 {
 	struct bcm2835_gpio_irqdata *irqdata = dev_id;
